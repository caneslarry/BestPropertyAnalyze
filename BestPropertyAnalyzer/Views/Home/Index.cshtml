@{
    ViewData["Title"] = "Home Page";
}
<script src="https://code.highcharts.com/highcharts.src.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places&key=AIzaSyC8F0gGkMf-PUPE4YQGRB5pOvAiTFNDv9I"></script>
<script type="text/javascript">google.maps.event.addDomListener(window, 'load', function () {


    var input = document.getElementById('Address');
    var places = new google.maps.places.Autocomplete(input, {});
        google.maps.event.addListener(places, 'place_changed', function () {
            let place = places.getPlace();
            var city = '';
            var state = '';
            var zip = '';
            var thehouse;
            for (var i = 0; i < place.address_components.length; i++) {
                for (var j = 0; j < place.address_components[i].types.length; j++) {
                    if (place.address_components[i].types[j] == "locality") {
                        city = place.address_components[i].short_name;
                    }
                    if (place.address_components[i].types[j] == "administrative_area_level_1") {
                        state = place.address_components[i].short_name;
                    }
                    if (place.address_components[i].types[j] == "postal_code") {
                        zip = place.address_components[i].short_name;
                    }
                }
            }

            $(".address-formatted").html(place.formatted_address);

            $.post("@Url.Action("GetPropertyData", "Home")", { address: place.name, citystatezip: city + ", " + state + " " + zip }, function (house) {
                thehouse = house;
                var str = '';
                for (var prop in house) {
                    str += prop + "= " + house[prop] + "<br/>";
                }
                $(".address-zillow").html(str);

                const chart = Highcharts.chart('chart', {
                    plotOptions: {
                        series: {
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return '$' + Highcharts.numberFormat(this.y, 0);
                                }
                            }
                        }
                    },
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'Cash Flow'
                    },
                    xAxis: {
                        categories: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
                    },
                    yAxis: {
                        title: {
                            text: 'Income'
                        }
                    },
                    series: [{
                        name: 'Property 1',
                        data: [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000],

                    }, {
                        name: 'Property 2',
                        data: [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000]
                    }]
                });

                new google.maps.Map(document.getElementById("map"), {
                    center: {
                        lat: thehouse.latitude, lng: thehouse.longitude
                    },
                    zoom: 8,
                });

                new google.maps.Marker({
                    position: { lat: thehouse.latitude, lng: thehouse.longitude},
                    map,
                    title: thehouse.address,
                });

            });

        });
    });
</script>

<div class="text-center">
    <div class="container address-input">
        <input id="Address" type="text" />
    </div>
    <div id="chart" style="width:100%; height:400px;"></div>
    <div id="map"></div>

    <div class="container address-formatted">

    </div>
    <div class="container address-zillow">

    </div>
</div>
